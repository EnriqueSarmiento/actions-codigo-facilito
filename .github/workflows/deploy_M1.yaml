name: Deploy to server

on: push

jobs:
  first_job:
    runs-on: ubuntu-latest
    ## se pueden declarar variables de entorno.
    env:
      NAME: CodigoFacilito

    steps:
      - name: Hola mundo
        ## imprimiendo la variable de entorno name.
        run: echo "Hola mundo desde GithuActions $NAME"

      - name: working dir
        run: ls -al

      - name: Action
        ## se usas la directiva uses para especificar que se usara ya un action definido, en este caso usaremos una de github actions. pero hay un marketplace
        uses: actions/checkout@v4

  second_job:
    ## contextos - nos sirven para tener informacion del workflow en todos los aspectos
    ## condicionales para determinar si un job se corre o no, solo se puede agregar un if por job.
    ## en este caso tenemos u condicional que emplea el contexto, donde solo se corre este segundo job solo si se esta trabajando en la rama main.
    if: ${{ github.ref == 'refs/heads/main' }}
    ## este job necesita el primer job, se usa la directiva de needs donde le valor es el number del otro job.
    needs: first_job
    runs-on: ubuntu-latest

    steps:
      - name: Segundo Hola mundo
        ## Tambien se pueden condicionar los steps
        ## if: false
        run: echo "Hola Mundo de nuevo, usando directiva para necesitar el primer job ${{ github.ref }}"
